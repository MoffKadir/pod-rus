@show_heist_window = "[And( CurrentHeist.IsSet, Not(GetPlayer.MakeScope.Var('hide_heist_window').IsSet) )]"

widget = {
	name = "pod_heists_window"
	visible = "[And( And( Not( IsPauseMenuShown ), IsDefaultGUIMode ), GetPlayer.IsValid)]"
	layer = royal_court # above the HUD, but below interaction windows and events
	size = { 100% 100% }

	window = {
		visible = @show_heist_window
		
		parentanchor = center
		position = { 0 -1000 }
		alpha = 0

		state = {
			name = _hide
			using = Animation_Curve_Default
			duration = 0.6

			bezier = { 0 1 0 1 }

			position = { 0 -1000 }
			alpha = 0
		}

		state = {
			name = _show
			duration = 0.8

			start_sound = {
				soundeffect = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_end_animate"
			}

			bezier = { 0 1 0 1 }

			position = { 0 0 }
			alpha = 1
		}
		
		state = {
			name = show_after_loading_save
			
			# fix for window getting stuck off-screen after loading a save
			trigger_when = @show_heist_window
			
			position = { 0 -1000 }
			alpha = 0
			
			next = _show
		}

		using = Window_Decoration

		background = {
			texture = "gfx/interface/component_tiles/tile_window_background.dds"
			spriteType = Corneredtiled
			spriteborder = { 18 0 }
			texture_density = 2
	
			modify_texture = {
				texture = "gfx/interface/component_overlay/overlay_effect.dds"
				blend_mode = overlay
			}
	
			modify_texture = {
				texture = "gfx/interface/illustrations/event_story/event_beginning_the_end.dds"
				blend_mode = colordodge
				framesize = { 1300 600 }
				alpha = 0.3
			}
	
			block "bg_margins"
			{
				margin = { -23 -17 }
			}
		}
		
		# j a n k
		state = {
			name = _pause
			trigger_when = "[Not(IsGamePaused)]"
			on_start = "[OnPause]"
		}
		
		vbox = {
			margin_left = 40
			margin_right = 40
			margin_top = 24
			margin_bottom = 20

			set_parent_size_to_minimum = yes

			#########################
			####### HEIST MAP #######
			#########################

			margin_widget = {
				name = "pod_heist_map"
				layoutpolicy_horizontal = expanding
				size = { 1300 600 }
				
				background = {
					texture = "gfx/interface/component_masks/mask_rough_edges.dds"
					spriteType = Corneredtiled
					spriteborder = { 20 20 }
					color = { 0.1 0.06 0.0 1 }
					texture_density = 1
					alpha = 0.8
			
					modify_texture = {
						texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
						spriteType = Corneredtiled
						blend_mode = alphamultiply
						alpha = 0.3
					}
				}

				pod_heist_map_bg = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_1_sgui')]"
					blockoverride "effect" { effectname = "FogHeist1" }
					blockoverride "bordercolor" { using = pod_color_suspicion1 }
				}
				pod_heist_map_bg = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_2_sgui')]"
					blockoverride "effect" { effectname = "FogHeist2" }
					blockoverride "bordercolor" { using = pod_color_suspicion2 }
				}
				pod_heist_map_bg = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_3_sgui')]"
					blockoverride "effect" { effectname = "FogHeist3" }
					blockoverride "bordercolor" { using = pod_color_suspicion3 }
				}
				pod_heist_map_bg = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_4_sgui')]"
					blockoverride "effect" { effectname = "FogHeist4" }
					blockoverride "bordercolor" { using = pod_color_suspicion4 }
				}
			
				widget = {
					name = "pod_heist_lines"
					size = { 100% 100% }
					alwaystransparent = yes
					datamodel = "[CurrentHeist.GetList('lines')]"
					item = {
						pod_heist_line = {}
					}
				}
			
				widget = {
					name = "pod_heist_nodes"
					size = { 100% 100% }
					alwaystransparent = yes
					datamodel = "[CurrentHeist.GetList('nodes')]"
					item = {
						pod_heist_node = {}
					}
				}
			}

			#############################
			####### HEIST DETAILS #######
			#############################

			hbox = {
				name = "pod_heist_details"
				layoutpolicy_horizontal = expanding
				spacing = 12
				
				spacer = { size = { 72 0 } }

				vbox = {
					layoutpolicy_horizontal = expanding
					spacing = 12

					spacer = { size = { 0 12 } }

					using = Background_Letter
			
					text_single = {
						text = "[Concatenate3( '• ', Localize(Concatenate('POD_heist_title_',CurrentHeistLocation.Var('type').GetFlagKey)), ' •' )]"
						#default_format = "#clickable"
						default_format = "#color:{0.5,0,0,1};glow_color:{0.3,0,0,1}"
						using = Font_Type_Flavor
						align = center
						fontsize = 36
						#background = { using = pod_heist_header_background }
					}
				
					text_multi = {
						#margin_top = 6
						autoresize = yes
						max_width = 500
						align = center
						text = "[Localize(Concatenate('POD_heist_desc_',CurrentHeistLocation.Var('type').GetFlagKey))]"
						
						default_format = "#light_background"
						format_override = { E UNDERLINE }
						fontsize = 18
					}

					spacer = { size = { 0 12 } }
					
					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_exit_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_exit" }
					}

					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_vault_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_vault" }
					}

					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_money_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_money" }
					}
					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_fame_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_fame" }
					}
					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_gossip_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_gossip" }
					}
					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_destress_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_destress" }
					}
					pod_fake_heist_event_button = {
						datacontext = "[GetScriptedGui('POD_heist_option_prisoners_sgui')]"
						blockoverride "button_text" { text = "POD_heist_option_prisoners" }
					}

					spacer = { size = { 0 12 } }
				}
				
				spacer = { size = { 24 0 } }

				vbox = {
					layoutpolicy_vertical = expanding
					spacing = 12

					minimumsize = { 500 300 }
			
					expand = {}
					
					pod_suspicion_display = {}
			
					spacer = { size = { 0 0 } }
					
					text_single = {
						text = "POD_heist_coterie"
						visible = "[PlayerGuiIsValid('POD_has_coterie_sgui')]"
						#default_format = "#glow_color:{0,0,0,0.4}"
						using = Font_Type_Flavor
						align = center
						fontsize = 24
						background = { using = pod_heist_header_background }
					}
										
					hbox = {
						visible = "[PlayerGuiIsValid('POD_has_coterie_sgui')]"
						datamodel = "[GetPlayer.MakeScope.Var('coterie').GetList('members')]"
						
						item = {
							pod_heist_coterie_button = {}
						}
					}
			
					expand = {}
				}
				
				spacer = { size = { 24 0 } }
			}
		}
	}
}


template pod_heist_header_background {
	using = Background_Title
	using = Mask_Rough_Edges

	margin_left  = 64
	margin_right = 64
	#margin_left  = 256
	#margin_right = 256
	margin_top = 4
	margin_bottom = 12

	modify_texture = {
		texture = "gfx/interface/component_masks/mask_fade_horizontal_thick.dds"
		blend_mode = alphamultiply
		mirror = horizontal
		alpha = 0.3
	}
	modify_texture = {
		texture = "gfx/interface/component_masks/mask_fade_horizontal_thick.dds"
		blend_mode = alphamultiply
		alpha = 0.3
	}
}

template pod_heist_suspicion_bg {
	texture = "gfx/interface/component_masks/mask_rough_edges.dds"
	spriteType = Corneredtiled
	spriteborder = { 20 20 }
	texture_density = 1

	modify_texture = {
		texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
		spriteType = Corneredtiled
		blend_mode = alphamultiply
		alpha = 0.2
	}

	modify_texture = {
		texture = "gfx/interface/component_masks/mask_scratches.dds"
		spriteType = Corneredtiled
		blend_mode = alphamultiply
		texture_density = 4
		alpha = 0.5
	}
}

template pod_color_suspicion1 {
	color = { 0.25 0.55 0.7 0.9 }
}
template pod_color_suspicion2 {
	color = { 0.7 0.7 0.7 0.9 }
}
template pod_color_suspicion3 {
	color = { 0.7 0.5 0.2 0.9 }
}
template pod_color_suspicion4 {
	color = { 0.7 0.0 0.1 0.9 }
}


types PODHeistTypes
{
	##### Map types

	type pod_heist_map_bg = widget
	{
		size = { 100% 100% }
		background = {
			using = pod_heist_suspicion_bg
			
			shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
			block "effect" { effectname = "FogHeist1" }
		}
				
		background = {
			using = Background_Frame
			block "bordercolor" { using = pod_color_suspicion1 }
			margin = { -4 -4 }
		}
		
		background = {
			using = Background_Frame
			block "bordercolor" { using = pod_color_suspicion1 }
			alpha = 0.5
			margin = { -10 -10 }
		}
	}

	type pod_heist_node = button_normal
	{
		size = { 50 50 }

		enabled = "[StoryGuiIsValid('POD_heist_node_button_sgui')]"
		onclick = "[StoryGuiExecute('POD_heist_node_button_sgui')]"

		state = {
			name = _show
			trigger_on_create = yes
			position_x = "[Subtract_int32(ScopedNodeX, HeistNodeOffset)]"
			position_y = "[Subtract_int32(ScopedNodeY, HeistNodeOffset)]"
		}

		button_icon = {
			texture = "gfx/interface/buttons/button_activity_base.dds"
			size = { 64 64 }
			position = { -7 -7 }

			visible = "[StoryGuiIsShown('POD_heist_is_current_location_sgui')]"
		}

		highlight_icon = {
			texture = "gfx/interface/buttons/button_activity_base.dds"
			size = { 64 64 }
			position = { -7 -7 }

			visible = "[Not( StoryGuiIsShown('POD_heist_is_current_location_sgui') )]"
		}

		highlight_icon = {
			visible = "[StoryGuiIsShown('POD_heist_node_button_sgui')]"
			texture = "[GetCultureInnovationType(Concatenate('heist_',Scope.Var('icon').GetFlagKey)).GetIcon]"
			size = { 50 50 }

			tooltipwidget = { pod_heist_node_tooltip = {} }
		}

		highlight_icon = {
			visible = "[Not( StoryGuiIsShown('POD_heist_node_button_sgui') )]"
			texture = "gfx/interface/icons/message_feed/control.dds"
			alpha = 0.5
			size = { 50 50 }

			tooltipwidget = { pod_heist_unexplored_node_tooltip = {} }
		}
	}
	type pod_heist_line = widget
	{
		size = { 100% 100% }
		line = {
			alpha = "[Select_float( StoryGuiIsValid('POD_heist_line_sgui'), '(float)1', '(float)0.3' )]"
			using = Line_Lifestyles_Unlocked
			scale = "[GetInvParentScale(PdxGuiWidget.Self)]"
			from  = "[PdxGetWidgetScreenSize(PdxGuiWidget.AccessParent.FindChild('pod_line_start').Self)]"
			to    = "[PdxGetWidgetScreenSize(PdxGuiWidget.AccessParent.FindChild('pod_line_end').Self)]"
		}
		widget = {
			name = "pod_line_start"
			min_width = "[ScopedLineX1]"
			max_width = "[ScopedLineX1]"
			min_height = "[ScopedLineY1]"
			max_height = "[ScopedLineY1]"
		}
		widget = {
			name = "pod_line_end"
			min_width = "[ScopedLineX2]"
			max_width = "[ScopedLineX2]"
			min_height = "[ScopedLineY2]"
			max_height = "[ScopedLineY2]"
		}
	}
	type pod_heist_node_tooltip = widget
	{
		alwaystransparent = no
		using = DefaultTooltipBackground
		using = GeneralTooltipSetup
		vbox = {
			restrictparent_min = yes

			margin = { 24 24 }
			margin_top = 12
			spacing = 6
			
			text_single = {
				text = "[Localize(Concatenate('POD_heist_title_',Scope.Var('type').GetFlagKey))]"
				default_format = "#clickable"
				using = Font_Type_Flavor
				align = center
				fontsize = 24
				
				background = {
					using = Background_Title
					using = Mask_Rough_Edges
					margin_left  = 64
					margin_right = 64
					margin_top = 0
					margin_bottom = 8
				
					modify_texture = {
						texture = "gfx/interface/component_masks/mask_fade_horizontal_thick.dds"
						blend_mode = alphamultiply
						mirror = horizontal
						alpha = 0.3
					}
					modify_texture = {
						texture = "gfx/interface/component_masks/mask_fade_horizontal_thick.dds"
						blend_mode = alphamultiply
						alpha = 0.3
					}
				}
			}

			text_multi = {
				#margin_top = 6
				autoresize = yes
				max_width = 400
				align = center
				text = "[Localize(Concatenate('POD_heist_desc_',Scope.Var('type').GetFlagKey))]"
				#fontsize = 18
			}

			spacer = { size = { 0 6 } }

			text_single = {
				visible = "[StoryGuiIsShown('POD_heist_is_current_location_sgui')]"
				text = "POD_heist_node_location_tt"
				default_format = "#I"
				align = center
				fontsize = 17 # lil bit bigger than default font size
			}

			vbox = {
				visible = "[Not(StoryGuiIsShown('POD_heist_is_current_location_sgui'))]"
				spacing = 6

				text_single = {
					visible = "[StoryGuiIsValid('POD_heist_node_button_sgui')]"
					text = "POD_heist_node_effect_tt"
					default_format = "#clickable;italic"
					align = center
					fontsize = 17 # lil bit bigger than default font size
				}
	
				text_single = {
					visible = "[StoryGuiIsValid('POD_heist_node_button_sgui')]"
					text = "[StoryGuiBuildTooltip('POD_heist_node_button_sgui')]"
					align = center
				}
	
				text_single = {
					visible = "[Not(StoryGuiIsValid('POD_heist_node_button_sgui'))]"
					text = "[StoryGuiIsValidTooltip('POD_heist_node_button_sgui')]"
					align = center
				}
			}

			expand = {}
		}
	}
	type pod_heist_unexplored_node_tooltip = widget
	{
		alwaystransparent = no
		using = DefaultTooltipBackground
		using = GeneralTooltipSetup
		vbox = {
			restrictparent_min = yes

			margin = { 24 22 }
			margin_top = 10
			spacing = 6
			
			text_single = {
				default_format = "#weak"
				using = Font_Type_Flavor
				align = center
				fontsize = 22
				text = "POD_heist_unexplored_node_tt"
			}
		}
	}

	##### Other types

	type pod_fake_heist_event_button = button_event_standard
	{
		visible = "[ScriptedGui.IsShown(GuiScope.SetRoot(GetPlayer.MakeScope).End)]"
		onclick = "[ScriptedGui.Execute(GuiScope.SetRoot(GetPlayer.MakeScope).End)]"
		enabled = "[PlayerGuiIsValid('POD_heist_option_sgui')]"

		size = { 500 36 }

		default_clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_icon_select"

		icon = {
			texture = "gfx/interface/buttons/button_event.dds"
			alpha = 1
			spriteType = Corneredtiled
			spriteborder = { 3 3 }
			framesize = { 249 78 }
			size = { 100% 100% }

			modify_texture = {
				name = "mask"
				texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
				spriteType = Corneredtiled
				spriteborder_left = 40
				spriteborder_right = 40
				blend_mode = alphamultiply
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_horizontal_short.dds"
				blend_mode = overlay
			}

			modify_texture = {
				texture = "gfx/interface/component_overlay/seamless_noise.dds"
				spriteType = Corneredtiled
				texture_density = 0.8
				alpha = 0.5
				blend_mode = overlay
			}
		}

		# Trick to not have the option text steal tooltips from the trait/skill grid
		hbox = {
			block "button_tooltip"
			{
				tooltip = "[ScriptedGui.BuildTooltip(GuiScope.SetRoot(GetPlayer.MakeScope).End)]"
			}

			block "option_tooltip_position"
			{
				using = tooltip_ws
				tooltip_offset = { -80 0 }
			}

			# Wider tooltips for the effects
			tooltipwidget = {
				using = DefaultTooltipWidget
			}
		}

		modify_texture = {
			name = "mask"
			texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
			spriteType = Corneredtiled
			spriteborder_left = 40
			spriteborder_right = 40
			blend_mode = alphamultiply
		}

		### BUTTON CONTENT ####
		hbox = {
			margin = { 5 0 }

			text_single = {
				layoutpolicy_horizontal = expanding
				margin = { 5 0 }
				alwaystransparent = yes
				
				block "button_text" {
					raw_text = "INSERT TEXT"
				}
				autoresize = no
				default_format = "#high"
				align = center|nobaseline
				fontsize_min = 12
			}
		}
	}

	type pod_suspicion_display = vbox {
		layoutpolicy_horizontal = expanding
		visible = "[PlayerGuiIsShown('POD_heist_suspicion_sgui')]"
		spacing = 12

		block "background" {}
		
		text_single = {
			text = "POD_heist_suspicion"
			using = Font_Type_Flavor
			align = center
			block "fontsize" { fontsize = 30 }
			block "header_bg" {
				background = { using = pod_heist_header_background }
			}
		}
	
		hbox = {
			layoutpolicy_horizontal = expanding
	
			margin_left = 20
			margin_right = 20
	
			hbox = {
				layoutpolicy_horizontal = expanding

				pod_heist_suspicion_bar_active = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_1_sgui')]"
				}
				pod_heist_suspicion_bar_inactive = {
					visible = "[Not(PlayerGuiIsShown('POD_heist_suspicion_level_1_sgui'))]"
				}

				pod_heist_suspicion_bar_active = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_2_sgui')]"
					blockoverride "texture" {
						texture = "gfx/interface/progressbars/house_unity/impassive.dds"
						#using = pod_color_suspicion2
					}
				}
				pod_heist_suspicion_bar_inactive = {
					visible = "[Not(PlayerGuiIsShown('POD_heist_suspicion_level_2_sgui'))]"
					blockoverride "texture" {
						texture = "gfx/interface/progressbars/house_unity/impassive.dds"
						#using = pod_color_suspicion2
					}
				}

				pod_heist_suspicion_bar_active = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_3_sgui')]"
					blockoverride "texture" {
						texture = "gfx/interface/progressbars/house_unity/competitive.dds"
						#using = pod_color_suspicion3
					}
				}
				pod_heist_suspicion_bar_inactive = {
					visible = "[Not(PlayerGuiIsShown('POD_heist_suspicion_level_3_sgui'))]"
					blockoverride "texture" {
						texture = "gfx/interface/progressbars/house_unity/competitive.dds"
						#using = pod_color_suspicion3
					}
				}

				pod_heist_suspicion_bar_active = {
					visible = "[PlayerGuiIsShown('POD_heist_suspicion_level_4_sgui')]"
					blockoverride "texture" {
						texture = "gfx/interface/progressbars/house_unity/antagonistic.dds"
						#using = pod_color_suspicion4
					}
				}
				pod_heist_suspicion_bar_inactive = {
					visible = "[Not(PlayerGuiIsShown('POD_heist_suspicion_level_4_sgui'))]"
					blockoverride "texture" {
						texture = "gfx/interface/progressbars/house_unity/antagonistic.dds"
						#using = pod_color_suspicion4
					}
				}
			}
		}
	}

	type pod_heist_suspicion_bar_inactive = icon {
		layoutpolicy_horizontal = expanding

		block "size" {
			size = { 50 25 }
		}

		block "texture" {
			texture = "gfx/interface/progressbars/house_unity/friendly.dds"
			#using = pod_color_suspicion1
		}

		spriteborder = { 6 6 }
		spriteType = Corneredtiled

		# tooltipwidget = {
		# 	house_unity_stage_tooltip = {}
		# }
	}

	type pod_heist_suspicion_bar_active = pod_heist_suspicion_bar_inactive {
		animation_attention_bar = {}

		blockoverride "size" {
			size = { 50 40 }
		}

		### Horizontal Wipe Animation Left
		icon = {
			size = { 100% 90% }
			parentanchor = vcenter
			texture = "gfx/interface/colors/white.dds"
			alpha = 0

			modify_texture = {
				name = "horizontal_wipe"
				texture = "gfx/interface/progressbars/progressbar_center_glow_white_decrease.dds"
				blend_mode = alphamultiply
			}

			state = {
				name = a
				next = b
				trigger_on_create = yes
				duration = 0
				alpha = 0

				modify_texture = {
					name = "horizontal_wipe"
					translate_uv = { -0.5 0 }
				}
			}

			state = {
				name = b
				next = c
				duration = 1
				alpha = 1
				on_finish = "[PdxGuiTriggerAllAnimations('grandeur_bar_glow')]"

				modify_texture = {
					name = "horizontal_wipe"
					translate_uv = { 1 0 }
				}
			}

			state = {
				name = c
				next = a
				duration = 0.5
				alpha = 0
				delay = 1.5
			}
		}

		### Horizontal Wipe Animation Right
		icon = {
			size = { 100% 90% }
			parentanchor = vcenter
			texture = "gfx/interface/colors/white.dds"
			alpha = 0

			modify_texture = {
				name = "horizontal_wipe"
				texture = "gfx/interface/progressbars/progressbar_center_glow_white_increase.dds"
				blend_mode = alphamultiply
			}

			state = {
				name = a
				next = b
				trigger_on_create = yes
				duration = 0
				alpha = 0

				modify_texture = {
					name = "horizontal_wipe"
					translate_uv = { 0.5 0 }
				}
			}

			state = {
				name = b
				next = c
				duration = 1
				alpha = 1
				on_finish = "[PdxGuiTriggerAllAnimations('grandeur_bar_glow')]"

				modify_texture = {
					name = "horizontal_wipe"
					translate_uv = { -1 0 }
				}
			}

			state = {
				name = c
				next = a
				duration = 0.5
				alpha = 0
				delay = 1.5
			}
		}

		hbox = {
			size = { 100% 100% }

			widget = {
				layoutpolicy_horizontal = expanding
				layoutstretchfactor_horizontal = "[SuspicionArrowPosition]"
			}

			widget = {
				icon = {
					block "marker_glow_attributes" {
						position = { -10 2 }
						size = { 14 35 }
					}
					texture = "gfx/interface/progressbars/progressbar_center_glow.dds"
					color = { 0.75 0.89 0.97 0.9 }
				}
	
				block "marker" {
					icon = {
						size = { 45 45 }
						position = { -22 15 }
						texture = "gfx/interface/window_dynasty_house/unity_arrow.dds"
					}
				}
			}

			widget = {
				layoutpolicy_horizontal = expanding
				layoutstretchfactor_horizontal = "[Subtract_int32( '(int32)25', SuspicionArrowPosition )]"
			}
		}
	}

	type pod_heist_coterie_button = hbox {
		
		portrait_head_small = {
			name = "coterie_member"
			datacontext = "[Scope.Char]"
			visible = "[GetScriptedGui('POD_is_coterie_member_present_sgui').IsValid(GuiScope.SetRoot(GetPlayer.MakeScope).AddScope('target',Scope.Char.MakeScope).End)]"
			blockoverride "coa" {}
		}
		portrait_head_small = {
			name = "coterie_member_not_present"
			datacontext = "[Scope.Char]"
			enabled = no
			visible = "[Not( GetScriptedGui('POD_is_coterie_member_present_sgui').IsValid(GuiScope.SetRoot(GetPlayer.MakeScope).AddScope('target',Scope.Char.MakeScope).End) )]"
			blockoverride "coa" {}
			blockoverride "opinion_box" {}
			blockoverride "status_icons" {}

			tooltip_visible = no
			blockoverride "portrait_button_template_tooltip" {
				tooltip = "POD_heist_coterie_member_absent"
			}
		}
	}
}