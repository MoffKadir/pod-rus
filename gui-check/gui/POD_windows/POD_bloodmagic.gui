widget = {
	name = "bloodmagic"
	visible = "[And( And( Not( IsPauseMenuShown ), IsDefaultGUIMode ), GetPlayer.IsValid)]"
	layer = windows_layer
	size = { 100% 100% }
	
	window = {
		#name = "bloodmagic"
		position = { 0 0 }
		parentanchor = center

		#layer = windows_layer
		size = { 1040 900 }

		state = {
			name = _show
			using = Animation_FadeIn_Quick
			using = Sound_WindowShow_Standard
		}

		state = {
			name = _hide
			using = Animation_FadeOut_Quick
			using = Sound_WindowHide_Standard
		}
		using = Window_Background
		using = Window_Decoration_Spike

		background = {
			visible = "[GetScriptedGui('is_bloodmagic_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
			texture = "gfx/interface/component_tiles/tile_window_background.dds"
			spriteType = Corneredtiled
			spriteborder = { 18 0 }
			texture_density = 2

			fittype = end
			framesize = { 1200 700 }

			shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
			effectname = "Flowyblood"

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
				blend_mode = alphamultiply
				mirror = vertical
				alpha = 0.4
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_corner.dds"
				blend_mode = alphamultiply
				#alpha = 0.95
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_scratches.dds"
				spriteType = Corneredtiled
				blend_mode = alphamultiply
				texture_density = 4
				alpha = 0.5
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
				spriteType = Corneredtiled
				blend_mode = alphamultiply
				alpha = 0.1
			}

			block "bg_margins"
			{
				margin = { -23 -17 }
			}
		}
		background = { # NECRO
			visible = "[GetScriptedGui('is_necromagic_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
			texture = "gfx/interface/component_tiles/tile_window_background.dds"
			spriteType = Corneredtiled
			spriteborder = { 18 0 }
			texture_density = 2

			fittype = end
			framesize = { 1200 700 }

			shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
			effectname = "FlowyRitual"

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
				blend_mode = alphamultiply
				mirror = vertical
				alpha = 0.4
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_corner.dds"
				blend_mode = alphamultiply
				#alpha = 0.95
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_scratches.dds"
				spriteType = Corneredtiled
				blend_mode = alphamultiply
				texture_density = 4
				alpha = 0.5
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
				spriteType = Corneredtiled
				blend_mode = alphamultiply
				alpha = 0.1
			}

			block "bg_margins"
			{
				margin = { -23 -17 }
			}
		}
		background = { # SORCERY
			visible = "[GetScriptedGui('is_sorcery_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
			texture = "gfx/interface/component_tiles/tile_window_background.dds"
			spriteType = Corneredtiled
			spriteborder = { 18 0 }
			texture_density = 2

			fittype = end
			framesize = { 1200 700 }

			shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
			effectname = "FlowySorcery"

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
				blend_mode = alphamultiply
				mirror = vertical
				alpha = 0.4
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_fade_corner.dds"
				blend_mode = alphamultiply
				#alpha = 0.95
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/mask_scratches.dds"
				spriteType = Corneredtiled
				blend_mode = alphamultiply
				texture_density = 4
				alpha = 0.5
			}

			modify_texture = {
				texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
				spriteType = Corneredtiled
				blend_mode = alphamultiply
				alpha = 0.1
			}

			block "bg_margins"
			{
				margin = { -23 -17 }
			}
		}
		
		visible = "[GetScriptedGui('bloodmagic').IsShown(GuiScope.AddScope('player',GetPlayer.MakeScope).End)]"
		vbox = {
			using = Window_Margins
			header_pattern_interaction = {
				visible = "[GetScriptedGui('bloodmagic').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
				layoutpolicy_horizontal = expanding

				blockoverride "header_text" {
					text = "title_bs"
					fontsize = 34
					margin_top = -6
					default_format = "#color:{0.8,0,0.2};glow_color:{0,0,0,1}"
				}

				blockoverride "button_close"
				{
					onclick = "[GetScriptedGui('necrofix').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
					onclick = "[GetScriptedGui('bloodmagic').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
				}

				icon_character_interaction = {}
			}
			header_pattern_interaction = {
				visible = "[GetScriptedGui('is_necromagic_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
				layoutpolicy_horizontal = expanding

				blockoverride "header_text" {
					text = "title_ns"
					fontsize = 34
					margin_top = -6
					default_format = "#color:{0.6,0.6,0.6};glow_color:{0,0,0,1}"
				}

				blockoverride "button_close"
				{
					onclick = "[GetScriptedGui('necrofix').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
					onclick = "[GetScriptedGui('bloodmagic').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
				}

				icon_character_interaction = {}
			}
			header_pattern_interaction = {
				visible = "[GetScriptedGui('is_sorcery_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
				layoutpolicy_horizontal = expanding

				blockoverride "header_text" {
					text = "title_s"
					fontsize = 34
					margin_top = -6
					default_format = "#color:{0.0,0.55,0.7};glow_color:{0,0,0,1}"
				}

				blockoverride "button_close"
				{
					onclick = "[GetScriptedGui('necrofix').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
					onclick = "[GetScriptedGui('bloodmagic').Execute( GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
				}

				icon_character_interaction = {}
			}
			vbox = {
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				
				scrollarea = {
					name = "paths_scrollarea"

					size = { 50 100 }

					layoutpolicy_horizontal = expanding

					scrollbarpolicy_vertical = always_off
					scrollbarpolicy_horizontal = as_needed

					scrollbar_vertical = { using = Scrollbar_Vertical }
					scrollbar_horizontal = { using = Scrollbar_Horizontal }
					background = { using = Background_Area }

					scrollwidget = {
						hbox = {
							layoutpolicy_horizontal = expanding
							hbox = {
								datamodel = "[GetPlayer.MakeScope.GetList('UnlockedPaths')]"
								#using = Scrollbox_Margins
								item = {
									button_tab = {
										texture = "[GetCultureInnovationType(Concatenate(Scope.GetFlagKey,'_icon')).GetIcon]"
										#texture = "gfx/interface/icons/PathofMars_Thaum.dds"
										tooltip = "[Localize(Concatenate(Scope.GetFlagKey,'_tooltip'))]"
										size = { 60 60 }
										framesize = { 60 60 }
										
										onclick = "[GetVariableSystem.Set('selected_path', Scope.GetFlagKey)]"
										down = "[GetVariableSystem.HasValue('selected_path', Scope.GetFlagKey)]"
									}
								}
							}

						}
						
					}
					icon = {
						name = "scrollbar_fade"
						texture = "gfx/interface/scrollbars/scrollbar_fade.dds"
						size = { 100% 100% }
						alwaystransparent = yes

						spriteType = Corneredtiled
						spriteborder = { 0 30 }
					}
				}   
				hbox = {
					layoutpolicy_horizontal = expanding
					layoutpolicy_vertical = expanding

					margin = { 20 20 }

					vbox = {
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding


						scrollbox = {
							name = "spell_scrollarea"
							
							

							layoutpolicy_horizontal = expanding
							layoutpolicy_vertical = expanding
							

							blockoverride "scrollbox_content"
							{	
								
								vbox = {
									layoutpolicy_horizontal = expanding
									datamodel = "[GetPlayer.MakeScope.GetList(Concatenate(GetVariableSystem.Get('selected_path'),'_list'))]"
									spacing = 10
									item = {
										button_standard_clean = {
											size = { 60 80 }
											layoutpolicy_horizontal = expanding

											downframe = 1
											downhoverframe = 1
											downpressedframe = 1
											
											##### Default button background (flowy red)
											background = {
												texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
												fittype = centercrop

												visible = "[And(GetScriptedGui('is_bloodmagic_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End), And( Not(GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey)), GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)))]"
												
												shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
												effectname = "Flowyblood"

												using = Mask_Rough_Edges

												modify_texture = {
													texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
													spriteType = Corneredtiled
													blend_mode = alphamultiply
													alpha = 0.6
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
													blend_mode = alphamultiply
													mirror = vertical
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_horizontal.dds"
													blend_mode = alphamultiply
													alpha = 0.4
												}
											}
											background = { # NECRO
												texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
												fittype = centercrop

												visible = "[And(GetScriptedGui('is_necromagic_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End), And( Not(GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey)), GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)))]"
												
												shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
												effectname = "FlowyRitual"

												using = Mask_Rough_Edges

												modify_texture = {
													texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
													spriteType = Corneredtiled
													blend_mode = alphamultiply
													alpha = 0.6
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
													blend_mode = alphamultiply
													mirror = vertical
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_horizontal.dds"
													blend_mode = alphamultiply
													alpha = 0.4
												}
											}
											background = { # Sorcery
												texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
												fittype = centercrop

												visible = "[And(GetScriptedGui('is_sorcery_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End), And( Not(GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey)), GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)))]"
												
												shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
												effectname = "FlowySorcery"

												using = Mask_Rough_Edges

												modify_texture = {
													texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
													spriteType = Corneredtiled
													blend_mode = alphamultiply
													alpha = 0.6
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
													blend_mode = alphamultiply
													mirror = vertical
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_horizontal.dds"
													blend_mode = alphamultiply
													alpha = 0.4
												}
											}
											
											##### Background for selected spell (flowy gold)
											background = {
												texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
												fittype = centercrop

												visible = "[And( GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey), GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End) )]"
												
												shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
												effectname = "FlowyGold"

												using = Mask_Rough_Edges

												modify_texture = {
													texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
													spriteType = Corneredtiled
													blend_mode = alphamultiply
													alpha = 0.3
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
													blend_mode = alphamultiply
													alpha = 0.6
													#mirror = vertical
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_horizontal.dds"
													blend_mode = alphamultiply
													alpha = 0.6
													mirror = horizontal
												}
											}

											##### Background for disabled spell (grey fog)
											background = {
												texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
												fittype = centercrop

												visible = "[And( Not(GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey)), Not(GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)) )]"
												
												shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
												effectname = "FogHeist2"

												using = Mask_Rough_Edges

												modify_texture = {
													texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
													spriteType = Corneredtiled
													blend_mode = alphamultiply
													alpha = 0.6
												}
											}

											##### Background for disabled and selected spell (flowy grey)
											background = {
												texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
												fittype = centercrop

												visible = "[And( GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey), Not(GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)) )]"
												
												shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
												effectname = "FlowyGrey"

												using = Mask_Rough_Edges

												modify_texture = {
													texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
													spriteType = Corneredtiled
													blend_mode = alphamultiply
													alpha = 0.4
												}

												modify_texture = {
													texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
													blend_mode = alphamultiply
													alpha = 0.6
													#mirror = vertical
												}
											}

											tooltip = "[GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValidTooltip(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"

											hbox = {
												margin = { 5 5 }
												icon = {
													visible = "[Not(GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End))]"
													size = { 35 35 }
													framesize = { 60 60 }
													frame = 1
													texture = "[GetCultureInnovationType(Concatenate(GetVariableSystem.Get('selected_path'),'_icon')).GetIcon]"
												
													tooltip = "[Localize(Concatenate(GetVariableSystem.Get('selected_path'),'_tooltip'))]"
												}
												icon = {
													visible = "[GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"
													size = { 35 35 }
													framesize = { 60 60 }
													frame = 2
													texture = "[GetCultureInnovationType(Concatenate(GetVariableSystem.Get('selected_path'),'_icon')).GetIcon]"
												
													tooltip = "[Localize(Concatenate(GetVariableSystem.Get('selected_path'),'_tooltip'))]"
												}
												divider_light = { layoutpolicy_vertical = expanding }

												hbox = {
													layoutpolicy_horizontal = expanding
													text_single = {
														visible = "[GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"
														layoutpolicy_horizontal = expanding
														text = "[Localize(Concatenate(Scope.GetFlagKey,'_name'))]"
														max_width = 250
														alwaystransparent = yes
														default_format = "#clickable;glow_color:{0,0,0,1}"
													}
													text_single = {
														visible = "[Not(GetScriptedGui(Concatenate(Scope.GetFlagKey,'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End))]"
														layoutpolicy_horizontal = expanding
														text = "[Localize(Concatenate(Scope.GetFlagKey,'_name'))]"
														max_width = 250
														alwaystransparent = yes
														default_format = "#low;glow_color:{0,0,0,1}"
													}
												}

												divider_light = { layoutpolicy_vertical = expanding }

												hbox = {
													layoutpolicy_horizontal = expanding
													max_width = 75
													min_width = 75
													text_multi = {
														layoutpolicy_horizontal = expanding
														layoutpolicy_vertical = expanding
														align = center
														tooltip = "[Localize(Concatenate(Scope.GetFlagKey,'_cost'))]"
														text = "[Localize(Concatenate(Scope.GetFlagKey,'_cost'))]"
														alwaystransparent = yes
														default_format = "#glow_color:{0,0,0,1}"
													}
												}
											}
											onclick = "[GetVariableSystem.Set('selected_spell', Scope.GetFlagKey)]"
											down = "[GetVariableSystem.HasValue('selected_spell', Scope.GetFlagKey)]"
										}
									}
								}

								block "extra_content" {}
							}

						}
					}
					vbox = {
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding

						hbox = {
							layoutpolicy_horizontal = expanding 
							margin = { -90 5 }
							background = {
								using = Background_Area
							}
							background = {
								visible = "[GetScriptedGui('bloodmagic').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
								texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
								fittype = centercrop
								
								shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
								effectname = "Flowyblood"

								using = Mask_Rough_Edges

								modify_texture = {
									texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
									blend_mode = alphamultiply
									mirror = vertical
								}

								modify_texture = {
									texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
									spriteType = Corneredtiled
									blend_mode = alphamultiply
									alpha = 0.8
								}
							}
							background = {
								visible = "[GetScriptedGui('is_necromagic_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
								texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
								fittype = centercrop
								
								shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
								effectname = "FlowyRitual"

								using = Mask_Rough_Edges

								modify_texture = {
									texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
									blend_mode = alphamultiply
									mirror = vertical
								}

								modify_texture = {
									texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
									spriteType = Corneredtiled
									blend_mode = alphamultiply
									alpha = 0.8
								}
							}
							background = {
								visible = "[GetScriptedGui('is_sorcery_GUI').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)]"
								texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
								fittype = centercrop
								
								shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
								effectname = "FlowySorcery"

								using = Mask_Rough_Edges

								modify_texture = {
									texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
									blend_mode = alphamultiply
									mirror = vertical
								}

								modify_texture = {
									texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
									spriteType = Corneredtiled
									blend_mode = alphamultiply
									alpha = 0.8
								}
							}
							hbox = {
								spacing = 12
								portrait_head_small = {
									datacontext = "[GetPlayer]"
									name = "caster_portrait"
									blockoverride "opinion_box" {}
									blockoverride "status_icons" {}
								}
								text_single = {
									text = "[Localize('caster_loc')]"
									fontsize = 26
									margin_bottom = 6
									using = Font_Type_Flavor
									default_format = "#clickable;glow_color:{0,0,0,1}"
								}	
							}
							hbox = {
								spacing = 12
								text_single = {
									text = "[Localize('target_loc')]"
									fontsize = 26
									margin_bottom = 6
									using = Font_Type_Flavor
									default_format = "#clickable;glow_color:{0,0,0,1}"
								}
								portrait_head_small = {
									name = "target_portrait"
									datacontext = "[GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter]"
			
									blockoverride "portrait_button" {}
								}
								
							}
						}
						vbox = {
							layoutpolicy_horizontal = expanding 
							layoutpolicy_vertical = expanding
							scrollbox = {
								layoutpolicy_horizontal = expanding 
								layoutpolicy_vertical = expanding
								blockoverride "scrollbox_content"
								{	
									text_multi = {
										layoutpolicy_horizontal = expanding
										layoutpolicy_vertical = expanding
										margin_left = 6
										margin_right = 24
										autoresize = yes
										max_width = 490
										text = "[GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).BuildTooltip(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"
									}
			
									block "extra_content" {}
								}
							}
							spacing = 15
							button_standard_big = {
								datacontext = "[GetVariableSystem]"
								enabled = "[GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"
								tooltip = "[GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).IsValidTooltip(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"
								onclick = "[GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).Execute(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End)]"
								text = "execute_loc"
								clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_start_game" # LOUD NOISE

								texture = "gfx/interface/buttons/button_standard_clean.dds"
								background = {
									using = Background_Area_ExtraDark
								}
								background = {
									texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
									fittype = centercrop

									visible = "[And(GetScriptedGui('bloodmagic').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End), GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End))]"
									
									shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
									effectname = "Flowyblood"
		
									modify_texture = {
										texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
										spriteType = Corneredtiled
										blend_mode = alphamultiply
										#alpha = 0.8
									}

									modify_texture = {
										texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
										blend_mode = alphamultiply
										alpha = 0.8
										mirror = vertical
									}

									modify_texture = {
										# transparent pixel for alpha
										texture = "gfx/interface/bookmarks/bm_1230_warofprinces_sub_ventrue_bookmark_warofprinces_mithras.dds"
										blend_mode = alphamultiply
										alpha = 0.4
									}
								}
								background = {
									texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
									fittype = centercrop

									visible = "[And(Not(GetScriptedGui('bloodmagic').IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).End)), GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End))]"
									
									shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
									effectname = "FlowyRitual"
		
									modify_texture = {
										texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
										spriteType = Corneredtiled
										blend_mode = alphamultiply
										#alpha = 0.8
									}

									modify_texture = {
										texture = "gfx/interface/component_masks/mask_fade_vertical.dds"
										blend_mode = alphamultiply
										alpha = 0.8
										mirror = vertical
									}

									modify_texture = {
										# transparent pixel for alpha
										texture = "gfx/interface/bookmarks/bm_1230_warofprinces_sub_ventrue_bookmark_warofprinces_mithras.dds"
										blend_mode = alphamultiply
										alpha = 0.4
									}
								}
								background = {
									texture = "gfx/interface/component_masks/mask_fade_horizontal_middle_thick.dds"
									fittype = centercrop

									visible = "[Not(GetScriptedGui(Concatenate(GetVariableSystem.Get('selected_spell'),'_script')).IsValid(GuiScope.SetRoot( GetPlayer.MakeScope ).AddScope('target', GetPlayer.MakeScope.GetVariable('spell_target').GetCharacter.MakeScope).End))]"
									
									shaderfile = "gfx/FX/POD_shaders/POD_event_shaders.shader"
									effectname = "FlowyGrey"
		
									modify_texture = {
										texture = "gfx/interface/component_masks/patterns/mask_pattern_04.dds"
										spriteType = Corneredtiled
										blend_mode = alphamultiply
									}
								}
							}


						}
					}
				}
			}
		}

	}
}