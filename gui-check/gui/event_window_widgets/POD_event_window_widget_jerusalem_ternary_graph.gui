
widget = {
	name = "POD_event_window_widget_jerusalem_ternary_graph"
	
	position = { -94 72 }
	size = { 500 460 }
	parentanchor = right|top
	
	background = {
		using = Background_Area_ExtraDark
		margin = { 6 6 }
	}
	
	background = {
		texture = "gfx/interface/component_masks/mask_frame.dds"
		spriteType = Corneredstretched
		spriteborder = { 10 10 }
		color = { 1.0 0.9 0.8 0.4 }
		margin = { 6 6 }
	}
	
	background = {
		texture = "gfx/interface/component_masks/mask_frame.dds"
		spriteType = Corneredstretched
		spriteborder = { 10 10 }
		color = { 1.0 0.9 0.8 0.6 }
	}
	
	vbox = {
		layoutpolicy_horizontal = expanding
		layoutpolicy_vertical = expanding
		
		spacer = { size = { 0 38 } }
		
		pod_ternary_graph = {
			# ~ 448 texture height, 224 bounding circle radius, 336 triangle height
			# ~ 388 side length
			blockoverride "graph_size" { size = { 389 336 } }
			
			blockoverride "icon_n_texture" {
				texture = "gfx/interface/icons/faith/catholic.dds"
			}
			blockoverride "icon_sw_texture" {
				texture = "gfx/interface/icons/faith/sunni.dds"
			}
			blockoverride "icon_se_texture" {
				texture = "gfx/interface/icons/faith/judaism.dds"
			}
			
			# the dot
			# not very reusable but nothing we can do until we get better vector datafunctions
			widget = {
				position = "[Multiply_CVector2f( '(CVector2f)389,336', PdxGetWidgetScreenSize(PdxGuiWidget.FindChild('ratio').Self) )]"
				
				widget = {
					name = "ratio"
					scale = "[GetInvParentScale(PdxGuiWidget.Self)]"
					min_width = "[GuiScope.ScriptValue('POD_jerusalem_graph_x')]"
					max_width = "[GuiScope.ScriptValue('POD_jerusalem_graph_x')]"
					min_height = "[GuiScope.ScriptValue('POD_jerusalem_graph_y')]"
					max_height = "[GuiScope.ScriptValue('POD_jerusalem_graph_y')]"
				}
				
				icon = {
					texture = "gfx/interface/icons/legend_hud.dds"
					size = { 50 50 }
					position = { -25 -25 }
					#color = { 0.3 0.2 0.0 1.0 }
					color = { 0.15 0.15 0.25 1.0 }
					
					glow = {
						color = { 1.0 0.9 0.8 1.0 }
						glow_radius = 8
						glow_generation_rules = {
							glow_alpha_mask = 0
							glow_blur_passes = 1
							glow_texture_downscale = 1.5f
							glow_ignore_inside_pixels = no
						}
					}
				}
			}
			
			widget = {
				position = { 224 -20 }
				vbox = {
					text_single = {
						raw_text = "[Localize('POD_christian_influence')]: [GuiScope.ScriptValue('POD_jerusalem_christian_influence')|0V]"
						font = TitleFont
						fontsize = 20
					}
					text_single = {
						raw_text = "#low ([GuiScope.ScriptValue('POD_jerusalem_christian_influence_ratio')|%0])#!"
						fontsize = 16
					}
				}
			}
			
			widget = {
				position = { -35 356 }
				vbox = {
					text_single = {
						raw_text = "[Localize('POD_muslim_influence')]: [GuiScope.ScriptValue('POD_jerusalem_muslim_influence')|0V]"
						font = TitleFont
						fontsize = 20
					}
					text_single = {
						raw_text = "#low ([GuiScope.ScriptValue('POD_jerusalem_muslim_influence_ratio')|%0])#!"
						fontsize = 16
					}
				}
			}
			
			widget = {
				position = { 35 356 }
				parentanchor = top|right
				vbox = {
					parentanchor = top|right
					text_single = {
						raw_text = "[Localize('POD_jewish_influence')]: [GuiScope.ScriptValue('POD_jerusalem_jewish_influence')|0V]"
						font = TitleFont
						fontsize = 20
					}
					text_single = {
						raw_text = "#low ([GuiScope.ScriptValue('POD_jerusalem_jewish_influence_ratio')|%0])#!"
						fontsize = 16
					}
				}
			}
		}
		
		expand = {}
	}
}