vbox = {
	name = "decision_view_widget_renaming_the_hekau"
	layoutpolicy_horizontal = expanding
	layoutpolicy_vertical = expanding
	ignoreinvisible = yes
	
	state = {
		name = init
		trigger_on_create = yes
		on_finish = "[PlayerGuiExecute('POD_renaming_the_hekau_init')]"
	}

	# text_multi = {
	# 	name = "description"
	# 	minimumsize = { 515 -1 }
	# 	maximumsize = { 515 -1 }
	# 	margin = { 15 15 }
	# 	autoresize = yes
	# 	text = "[DecisionDetailView.GetDescription]"
	# 	using = Font_Size_Small
	# }

	# text_label_center = {
	# 	text = "SELECT_VALID_OPTION"
	# }

	hbox = {
		layoutpolicy_horizontal = expanding
		layoutpolicy_vertical = expanding		

		scrollbox = {
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding

			blockoverride "scrollbox_content" {
				vbox = {
					layoutpolicy_horizontal = expanding
					#datamodel = "[DecisionViewWidgetOptionList.GetEntries]"
					datamodel = "[GetPlayer.MakeScope.GetList('renaming_the_hekau_journeys')]"
					spacing = 6

					item = {
						simple_button_journey_entry = {
							layoutpolicy_horizontal = expanding
							
							blockoverride "basic_properties" {
								onclick = "[GetScriptedGui('POD_renaming_the_hekau_button').Execute(GuiScope.SetRoot(GetPlayer.MakeScope).AddScope('selection',MakeScopeFlag(Scope.GetFlagName)).End)]"
								#enabled = "[Entry.IsEnabled]"
								raw_tooltip = "#help [Localize( Concatenate(Scope.GetFlagName,'_tt') )]#!"
								down = "[EqualTo_string( Scope.GetFlagName, GetPlayer.MakeScope.Var('renaming_the_hekau_selection').GetFlagName )]"
							}
							
							blockoverride "journey_is_enabled" {
								visible = "['(bool)yes']"
							}
							blockoverride "journey_is_disabled" {
								visible = "['(bool)no']"
							}
							blockoverride "journey_name" {
								text = "[Localize(Concatenate(Scope.GetFlagName,'_name'))]"
							}
							blockoverride "journey_illustration" {
								texture = "[GetCultureInnovationType(Concatenate(Scope.GetFlagName,'_illustration')).GetIcon]"
							}
							blockoverride "journey_icon" {
								texture = "[GetCultureInnovationType(Concatenate(Scope.GetFlagName,'_icon')).GetIcon]"
							}
						}
					}
				}
			}

			blockoverride "scrollbox_background_fade" {}
		}
	}
}

types PODDecisionTypes
{
	# The first attempt at this used the data passed from the decision widget (from the Entry promote)
	# but that leads to the error log complaining about missing loc
	type simple_button_journey_entry = button_standard {
		size = { -1 65 }
		
		block "basic_properties" {
			onclick = "[DecisionViewWidgetOptionList.OnSelect(Entry.Self)]"
			enabled = "[Entry.IsEnabled]"
			raw_tooltip = "#help [Localize( Concatenate(Entry.GetName,'_tt') )]#!"
			#tooltip = "[Localize( Concatenate(Entry.GetName,'_desc') )]"
			down = "[Entry.IsSelected]"
		}
		
		layoutpolicy_horizontal = expanding

		widget = {
			scissor = yes
			parentanchor = right|top

			block "size_illustration" {
				size = { 250 63 }
			}

			icon = {
				name = "illustration"
				parentanchor = right|top
				size = { 250 100 }

				mirror = horizontal
				block "journey_illustration" {
					texture = "[GetCultureInnovationType(Concatenate(Entry.GetName,'_illustration')).GetIcon]"
				}
				alpha = 0.7

				block "journey_is_enabled" {
					visible = "[Entry.IsEnabled]"
				}

				using = Mask_Rough_Edges

				modify_texture = {
					texture = "gfx/interface/component_masks/mask_fade_horizontal_extended.dds"
					blend_mode = alphamultiply
				}
			}

			highlight_icon = {
				parentanchor = right|top
				size = { 250 100 }

				mirror = horizontal
				block "journey_illustration" {
					texture = "[GetCultureInnovationType(Concatenate(Entry.GetName,'_illustration')).GetIcon]"
				}
				alpha = 0.7

				block "journey_is_disabled" {
					visible = "[Not(Entry.IsEnabled)]"
				}

				effectname = "GreyedOut"

				tintcolor = { 0.6 0.6 0.6 0.7 }

				using = Mask_Rough_Edges

				modify_texture = {
					texture = "gfx/interface/component_masks/mask_fade_horizontal_extended.dds"
					blend_mode = alphamultiply
				}
			}
		}

		hbox = {
			margin = { 16 0 }
			margin_right = 10
			
			highlight_icon = {
				block "journey_is_enabled" {
					visible = "[Entry.IsEnabled]"
				}
				size = { 45 45 }
				alwaystransparent = yes
				block "journey_icon" {
					texture = "[GetCultureInnovationType(Concatenate(Entry.GetName,'_icon')).GetIcon]"
				}
			}
			
			highlight_icon = {
				block "journey_is_disabled" {
					visible = "[Not(Entry.IsEnabled)]"
				}
				size = { 45 45 }
				alwaystransparent = yes
				block "journey_icon" {
					texture = "[GetCultureInnovationType(Concatenate(Entry.GetName,'_icon')).GetIcon]"
				}
				effectname = "GreyedOut"
			}
			
			container = { min_width = 16 }

			text_single = {
				layoutpolicy_horizontal = growing
				name = "title"
				block "journey_name" {
					text = "[Entry.GetTooltip]"
					#text = "[Localize(Concatenate(Entry.GetName,'_name'))]"
				}
				block "journey_is_enabled" {
					visible = "[Entry.IsEnabled]"
				}
				default_format = "#clickable"
				align = nobaseline
				alwaystransparent = yes
			}

			text_single = {
				layoutpolicy_horizontal = growing
				name = "title2"
				block "journey_name" {
					text = "[Localize(Concatenate(Entry.GetName,'_name'))]"
				}
				block "journey_is_disabled" {
					visible = "[Not(Entry.IsEnabled)]"
				}
				default_format = "#low"
				align = nobaseline
				alwaystransparent = yes
			}
		}
	}
}
